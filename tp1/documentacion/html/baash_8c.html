<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Tp1 Socket: tp1/tp1_servidor_baash/baash.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Tp1 Socket
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_742e354459e5084a76a330f62c51a308.html">tp1</a></li><li class="navelem"><a class="el" href="dir_9e98bb166943fbdc84e77af638ab0116.html">tp1_servidor_baash</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">baash.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &quot;<a class="el" href="parsear__entrada_8h_source.html">parsear_entrada.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="buscar__en___p_a_t_h_8h_source.html">buscar_en_PATH.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cantidad__de__retrocesos_8h_source.html">cantidad_de_retrocesos.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="armar__path__relativo_8h_source.html">armar_path_relativo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pipe__argumentos_8h_source.html">pipe_argumentos.h</a>&quot;</code><br />
<code>#include &lt;sys/wait.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;sys/socket.h&gt;</code><br />
<code>#include &lt;netinet/in.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for baash.c:</div>
<div class="dyncontent">
<div class="center"><img src="baash_8c__incl.png" border="0" usemap="#tp1_2tp1__servidor__baash_2baash_8c" alt=""/></div>
<!-- MAP 0 -->
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a39912bfe2a55f30e269196f9141d845d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="baash_8c.html#a39912bfe2a55f30e269196f9141d845d">BUFFSIZE</a>&#160;&#160;&#160;1024</td></tr>
<tr class="memdesc:a39912bfe2a55f30e269196f9141d845d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tamaño de los buffer para sockets.  <a href="#a39912bfe2a55f30e269196f9141d845d">More...</a><br /></td></tr>
<tr class="separator:a39912bfe2a55f30e269196f9141d845d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada74e7db007a68e763f20c17f2985356"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="baash_8c.html#ada74e7db007a68e763f20c17f2985356">READ</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:ada74e7db007a68e763f20c17f2985356"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa10f470e996d0f51210d24f442d25e1e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="baash_8c.html#aa10f470e996d0f51210d24f442d25e1e">WRITE</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:aa10f470e996d0f51210d24f442d25e1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afa626168c9182e44ca4c847464ec0dab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="baash_8c.html#afa626168c9182e44ca4c847464ec0dab">obtener_entrada</a> (char *entrada, char *argumentos[], char *fichero)</td></tr>
<tr class="separator:afa626168c9182e44ca4c847464ec0dab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9308173e8a8a9cb1cc59151a4456180a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="baash_8c.html#a9308173e8a8a9cb1cc59151a4456180a">operadores</a> (char *argumentos[])</td></tr>
<tr class="memdesc:a9308173e8a8a9cb1cc59151a4456180a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parsea argumentos de la linea de comandos. y detecta '&amp;', '&lt;', '&gt;' y '|'.  <a href="#a9308173e8a8a9cb1cc59151a4456180a">More...</a><br /></td></tr>
<tr class="separator:a9308173e8a8a9cb1cc59151a4456180a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a338ba26b1e878583d253e45754460fff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="baash_8c.html#a338ba26b1e878583d253e45754460fff">buscar_path_ejecutar</a> (char *camino, char *argumentos[])</td></tr>
<tr class="memdesc:a338ba26b1e878583d253e45754460fff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Se identifica que tipo de path es (absoluto, relativo, etc)  <a href="#a338ba26b1e878583d253e45754460fff">More...</a><br /></td></tr>
<tr class="separator:a338ba26b1e878583d253e45754460fff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43f69d6139393059c8d90ad756333424"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="baash_8c.html#a43f69d6139393059c8d90ad756333424">baash</a> (int newsockfd, socklen_t clilen)</td></tr>
<tr class="separator:a43f69d6139393059c8d90ad756333424"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a39912bfe2a55f30e269196f9141d845d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUFFSIZE&#160;&#160;&#160;1024</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tamaño de los buffer para sockets. </p>

</div>
</div>
<a class="anchor" id="ada74e7db007a68e763f20c17f2985356"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define READ&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa10f470e996d0f51210d24f442d25e1e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WRITE&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a43f69d6139393059c8d90ad756333424"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int baash </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>newsockfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">socklen_t&#160;</td>
          <td class="paramname"><em>clilen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newsockfd</td><td>es el file descriptor del socket TCP. </td></tr>
    <tr><td class="paramname">clilen</td><td>es tamaño de la estructura del socket</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>baash.</dt><dd>Esta funcion el el baash desarrollado en sistemas operativos I. Se le hizo una modificacion para poder desviar el STDIN y el STOUT por el socket y para poder enviar archivos por el socket UDP. </dd></dl>
<p>Se desvia el STDOUT por el puerto TCP</p>
<p>Se desvia el STDIN por el puerto TCP</p>
<dl class="section user"><dt>Comando "descargar".</dt><dd>Esta parte lee el archivo que se solicito. Se recorre por lineas y se comienza enviar los datos al cliente utilizando el socket UDP. Cuando se llega al final del archivo se envia la cadena "finDeLectura" al cliente, que este interpreta que no hay mas datos para recibir. Una vez finalizado el envio el achivo se cierra.</dd></dl>
<p>Se realiza la configuracion para envio por protocolo UDP</p>
<p>Se comienza a leer el archivo y enviar los datos leidos</p>
<p>Se avisa al destino que no hay mas datos por enviar </p>

</div>
</div>
<a class="anchor" id="a338ba26b1e878583d253e45754460fff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buscar_path_ejecutar </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>camino</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argumentos</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Se identifica que tipo de path es (absoluto, relativo, etc) </p>

</div>
</div>
<a class="anchor" id="afa626168c9182e44ca4c847464ec0dab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void obtener_entrada </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>entrada</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argumentos</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fichero</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Se parsea la entrada por teclado que contiene el path o directamente el programa a ejecutar en caso de estar en $PATH (como date) y los parametros para la ejecucion del mismo. El resultado del parseo se guarda en la variable argumentos. </p>

</div>
</div>
<a class="anchor" id="a9308173e8a8a9cb1cc59151a4456180a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int operadores </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argumentos</em>[]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parsea argumentos de la linea de comandos. y detecta '&amp;', '&lt;', '&gt;' y '|'. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
